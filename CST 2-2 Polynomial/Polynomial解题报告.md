#Polynomial解题报告
> 作者：计26 郑睿阳 2022010849

## 前言 & 大体思路
* 这道题目实际上究其本质和一般的四则运算在实现算法上没有区别。只是进行运算的时候，需要将运算的数域从实数转换为多项式。我们需要实现的运算包括 `+`, `-`, `*` 与 `^` 四种运算。因此，这道题目实际上是需要实现一个中缀表达式的模板类。
* 这道题目是笔者做的所有利用OJ评测的编程作业当中代码量最大的一道。据笔者所知，选择这道题的同学的代码量基本没有低于300行的。在笔者还未开始coding的时候，也已经听闻了许多早于自己开始做这道题的同学debug持续了一周但未果的事情。因此，笔者在做题的时候并未急于coding，而是先将双栈的中缀表达式在纸面上重新复习了一遍。然后，尝试手动实现了使用模板类编写的普通四则运算的代码，最后再利用模板类将其抽象为多项式的运算。遵循这样的流程，笔者从开始coding到通过九成测只花了不到一天的时间。Dijkstra 曾经说过：“有效的程序员不应该浪费很多时间用于程序调试，他们应该一开始就不要把故障引入。” 先理清思路，再进行coding是一个很好的习惯，能大大提升编程效率。

## 数据结构
* 本题采用面向对象的编程方法进行编写。在源代码当中，定义了许多类型的类/结构体。在这里只选取对于算法比较重要的数据结构进行阐述。
> **多项式类**：
    多项式类内部封装了一个长度为 $65$ 的数组，用于表示次数不超过 $64$ 位的多项式各位系数。同时，为了便捷多项式类本身的运算，还引入了最高位（即最高非零次项）标记。
    在多项式类内部定义了 `+=`, `-=`, `*=`, `^=` 四种类型的运算，用于达到重载运算符的效果。这里之所以没有采取传统意义上的运算符号，是为了节省空间与拷贝构造所需要的时间。

> **栈**：
    本体当中将使用的栈结构使用类进行封装。在 `Stack` 类当中实现了栈的大多数接口，还额外实现了获取栈顶 & 次顶元素指针的接口。这是为了方便在需要元素出栈时访问运算更为快速。

## 算法
* 本题采用的算法与正常的四则运算类如出一辙，基本算法原理采用的就是在数据结构课上学到的“双栈算法”。同时，也部分复用了题面当中所提供的运算符优先级表。这里不对栈算法的正确性进行过度的阐述。
* 简述一下省略乘号的实现方法：事实上可以用有限的几种状态对于省略乘号的情况进行刻画：也就是在扫描时扫到的符号是 $x$，且左边是数字或右括号，或者扫到的符号是左括号，左边的符号不是操作符。这种时候只需要暂缓操作符/数入栈，先将乘号入栈并且使扫描算式的指针暂时不动即可。
* 同时，由于本题当中需要对 $1000000007$ 取模，所以只需要在多项式类的运算当中对此进行封装即可。

## 时空复杂度
### 时间复杂度
* 从整体意义上来说，本题目的时间复杂度和普通中缀表达式的算法相当。对传统中缀表达式的算法进行分摊分析：每个算式当中的运算符/数都之多会进行一次入栈&一次出栈操作。因此算法的时间复杂度应当是 $O(n)$ 的。这里值得一提的是，由于算法需要模拟多项式类的多种运算，因此算法的常数会比较大。
### 空间复杂度
* 不难看出，空间复杂度为 $O(n)$ 。
